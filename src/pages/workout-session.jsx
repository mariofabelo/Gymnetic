import React, { useState, useEffect } from 'react';
import { Page, Navbar, Block, Button, f7 } from 'framework7-react';

const WorkoutSessionPage = () => {
  const [isListening, setIsListening] = useState(false);
  const [isRecording, setIsRecording] = useState(false);

  const handleMicrophoneToggle = () => {
    setIsListening(!isListening);
    setIsRecording(!isRecording);
    // TODO: Implement voice recording logic
    console.log('Microphone toggled:', !isListening);
  };

  const handleEndWorkout = () => {
    // TODO: Implement end workout logic
    console.log('Ending workout...');
    f7.views.current.router.back();
  };

  const handleSettings = () => {
    // TODO: Navigate to workout settings or show settings modal
    console.log('Opening workout settings...');
  };

  return (
    <Page name="workout-session" className="workout-session-page">
      {/* Custom header without back button */}
      <div className="workout-header">
        <h1 className="workout-title">Workout</h1>
        <Button className="settings-btn" onClick={handleSettings}>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 7C3.73478 7 3.48043 7.10536 3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8C3 8.26522 3.10536 8.51957 3.29289 8.70711C3.48043 8.89464 3.73478 9 4 9H8C8.26522 9 8.51957 8.89464 8.70711 8.70711C8.89464 8.51957 9 8.26522 9 8C9 7.73478 8.89464 7.48043 8.70711 7.29289C8.51957 7.10536 8.26522 7 8 7H4ZM4 3C3.73478 3 3.48043 3.10536 3.29289 3.29289C3.10536 3.48043 3 3.73478 3 4C3 4.26522 3.10536 4.51957 3.29289 4.70711C3.48043 4.89464 3.73478 5 4 5H12C12.2652 5 12.5196 4.89464 12.7071 4.70711C12.8946 4.51957 13 4.26522 13 4C13 3.73478 12.8946 3.48043 12.7071 3.29289C12.5196 3.10536 12.2652 3 12 3H4ZM12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16C13 15.7348 12.8946 15.4804 12.7071 15.2929C12.5196 15.1054 12.2652 15 12 15C11.7348 15 11.4804 15.1054 11.2929 15.2929C11.1054 15.4804 11 15.7348 11 16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17ZM12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13C12.2652 13 12.5196 12.8946 12.7071 12.7071C12.8946 12.5196 13 12.2652 13 12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM7 15C6.20435 15 5.44129 15.3161 4.87868 15.8787C4.31607 16.4413 4 17.2044 4 18C4 18.7956 4.31607 19.5587 4.87868 20.1213C5.44129 20.6839 6.20435 21 7 21C7.79565 21 8.55871 20.6839 9.12132 20.1213C9.68393 19.5587 10 18.7956 10 18C10 17.2044 9.68393 16.4413 9.12132 15.8787C8.55871 15.3161 7.79565 15 7 15ZM16 13C15.2043 13 14.4413 13.3161 13.8787 13.8787C13.3161 14.4413 13 15.2044 13 16C13 16.7956 13.3161 17.5587 13.8787 18.1213C14.4413 18.6839 15.2043 19 16 19C16.7957 19 17.5587 18.6839 18.1213 18.1213C18.6839 17.5587 19 16.7956 19 16C19 15.2044 18.6839 14.4413 18.1213 13.8787C17.5587 13.3161 16.7957 13 16 13ZM20 9C19.2043 9 18.4413 9.31607 17.8787 9.87868C17.3161 10.4413 17 11.2044 17 12C17 12.7956 17.3161 13.5587 17.8787 14.1213C18.4413 14.6839 19.2043 15 20 15C20.7957 15 21.5587 14.6839 22.1213 14.1213C22.6839 13.5587 23 12.7956 23 12C23 11.2044 22.6839 10.4413 22.1213 9.87868C21.5587 9.31607 20.7957 9 20 9ZM11 8C11 7.20435 11.3161 6.44129 11.8787 5.87868C12.4413 5.31607 13.2044 5 14 5C14.7956 5 15.5587 5.31607 16.1213 5.87868C16.6839 6.44129 17 7.20435 17 8C17 8.79565 16.6839 9.55871 16.1213 10.1213C15.5587 10.6839 14.7956 11 14 11C13.2044 11 12.4413 10.6839 11.8787 10.1213C11.3161 9.55871 11 8.79565 11 8ZM20 5C19.7348 5 19.4804 5.10536 19.2929 5.29289C19.1054 5.48043 19 5.73478 19 6C19 6.26522 19.1054 6.51957 19.2929 6.70711C19.4804 6.89464 19.7348 7 20 7H24C24.2652 7 24.5196 6.89464 24.7071 6.70711C24.8946 6.51957 25 6.26522 25 6C25 5.73478 24.8946 5.48043 24.7071 5.29289C24.5196 5.10536 24.2652 5 24 5H20ZM15 20C15 19.7348 15.1054 19.4804 15.2929 19.2929C15.4804 19.1054 15.7348 19 16 19C16.2652 19 16.5196 19.1054 16.7071 19.2929C16.8946 19.4804 17 19.7348 17 20C17 20.2652 16.8946 20.5196 16.7071 20.7071C16.5196 20.8946 16.2652 21 16 21C15.7348 21 15.4804 20.8946 15.2929 20.7071C15.1054 20.5196 15 20.2652 15 20Z" fill="currentColor"/>
          </svg>
        </Button>
      </div>

      <Block className="workout-session-content">
        {/* Voice Visualization Circle */}
        <div className="voice-visualization-container">
          <div className={`voice-circle ${isListening ? 'listening' : ''}`}>
            <div className="voice-gradient"></div>
            <Button 
              className="microphone-btn" 
              onClick={handleMicrophoneToggle}
            >
              <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M10.5 6C10.5 4.80653 10.9741 3.66193 11.818 2.81802C12.6619 1.97411 13.8065 1.5 15 1.5C16.1935 1.5 17.3381 1.97411 18.182 2.81802C19.0259 3.66193 19.5 4.80653 19.5 6V12C19.5 13.1935 19.0259 14.3381 18.182 15.182C17.3381 16.0259 16.1935 16.5 15 16.5C13.8065 16.5 12.6619 16.0259 11.818 15.182C10.9741 14.3381 10.5 13.1935 10.5 12V6ZM16.5 22.395C18.9993 22.0339 21.2848 20.7844 22.9378 18.8752C24.5907 16.9661 25.5003 14.5253 25.5 12C25.5 11.6022 25.342 11.2206 25.0607 10.9393C24.7794 10.658 24.3978 10.5 24 10.5C23.6022 10.5 23.2206 10.658 22.9393 10.9393C22.658 11.2206 22.5 11.6022 22.5 12C22.5 13.9891 21.7098 15.8968 20.3033 17.3033C18.8968 18.7098 16.9891 19.5 15 19.5C13.0109 19.5 11.1032 18.7098 9.6967 17.3033C8.29018 15.8968 7.5 13.9891 7.5 12C7.5 11.6022 7.34196 11.2206 7.06066 10.9393C6.77936 10.658 6.39782 10.5 6 10.5C5.60218 10.5 5.22064 10.658 4.93934 10.9393C4.65804 11.2206 4.5 11.6022 4.5 12C4.49966 14.5253 5.4093 16.9661 7.06223 18.8752C8.71516 20.7844 11.0007 22.0339 13.5 22.395V25.5H9C8.60217 25.5 8.22064 25.658 7.93934 25.9393C7.65804 26.2206 7.5 26.6022 7.5 27C7.5 27.3978 7.65804 27.7794 7.93934 28.0607C8.22064 28.342 8.60217 28.5 9 28.5H21C21.3978 28.5 21.7794 28.342 22.0607 28.0607C22.342 27.7794 22.5 27.3978 22.5 27C22.5 26.6022 22.342 26.2206 22.0607 25.9393C21.7794 25.658 21.3978 25.5 21 25.5H16.5V22.395Z" fill="white"/>
              </svg>
            </Button>
          </div>
        </div>

        {/* End Workout Button */}
        <div className="end-workout-container">
          <Button className="end-workout-btn" onClick={handleEndWorkout}>
            <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M28.0001 50.4C33.9409 50.4 39.6385 48.04 43.8393 43.8392C48.0401 39.6384 50.4001 33.9408 50.4001 28C50.4001 22.0591 48.0401 16.3616 43.8393 12.1608C39.6385 7.95997 33.9409 5.59998 28.0001 5.59998C22.0592 5.59998 16.3617 7.95997 12.1609 12.1608C7.96009 16.3616 5.6001 22.0591 5.6001 28C5.6001 33.9408 7.96009 39.6384 12.1609 43.8392C16.3617 48.04 22.0592 50.4 28.0001 50.4ZM24.3797 20.4204C23.8516 19.9103 23.1242 18.4936 22.39 18.5C21.6559 18.5064 20.9737 19.9353 20.4546 20.4545C19.9355 20.9736 19.0064 21.6759 19 22.4101C18.9936 23.1442 19.9105 23.8515 20.4205 24.3796L24.0409 28L20.4205 31.6204C20.1531 31.8787 19.9398 32.1876 19.793 32.5292C19.6463 32.8709 19.569 33.2383 19.5658 33.6101C19.5626 33.9818 19.6334 34.3505 19.7742 34.6946C19.915 35.0388 20.1229 35.3514 20.3858 35.6143C20.6487 35.8772 20.9613 36.0851 21.3054 36.2259C21.6495 36.3667 22.0182 36.4375 22.39 36.4343C22.7618 36.431 23.1292 36.3538 23.4708 36.2071C23.8124 36.0603 24.1214 35.847 24.3797 35.5796L28.0001 31.9592L31.6205 35.5796C32.1486 36.0896 32.8559 36.3718 33.59 36.3655C34.3242 36.3591 35.0264 36.0646 35.5456 35.5455C36.0647 35.0263 36.3592 34.324 36.3656 33.5899C36.372 32.8557 36.0897 32.1485 35.5797 31.6204L31.9593 28L35.5797 24.3796C36.0897 23.8515 37.5064 23.2342 37.5 22.5C37.4936 21.7658 36.0647 20.9736 35.5456 20.4545C35.0264 19.9353 34.3242 19.0064 33.59 19C32.8559 18.9936 32.1486 19.9103 31.6205 20.4204L28.0001 24.0408L24.3797 20.4204Z" fill="black"/>
            </svg>
          </Button>
        </div>
      </Block>
    </Page>
  );
};

export default WorkoutSessionPage;
